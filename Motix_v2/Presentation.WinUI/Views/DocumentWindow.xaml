<Window
    x:Class="Motix_v2.Presentation.WinUI.Views.DocumentWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ct="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:ctp="using:CommunityToolkit.WinUI.UI.Controls.Primitives"
    xmlns:tv="using:WinUI.TableView"
    x:Name="This"
    Title="Buscar Documentos">

    <Grid DataContext="{Binding ViewModel, ElementName=This}">
        <!-- 3 filas: búsqueda, tabla y botón Volver -->
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Fila 1: DataGrid de documentos con ordenado -->
        <tv:TableView
            x:Name="TableViewDocuments"
            Grid.Row="0"
            ItemsSource="{x:Bind ViewModel.DocumentItems}"
            AutoGenerateColumns="False"
            Width="auto"
            Margin="16">
            <tv:TableView.Columns>
                <tv:TableViewTextColumn
                    Header="ID Documento"
                    Binding="{Binding Id}"
                    Width="auto"/>
                <tv:TableViewTextColumn
                    Header="Cliente"
                    Binding="{Binding Cliente.Nombre}"
                    Width="auto"/>
                <tv:TableViewTextColumn
                    Header="Fecha"
                    Binding="{Binding Fecha}"
                    Width="auto"/>
                <tv:TableViewNumberColumn
                    Header="Total (€)"
                    Binding="{Binding Total}"
                    Width="auto"/>
                <tv:TableViewTextColumn
                    Header="Estado reparto"
                    Binding="{Binding EstadoReparto}"
                    Width="auto"/>
            </tv:TableView.Columns>
        </tv:TableView>


        <!-- Fila 2: Solo botón Volver -->
        <StackPanel
            Grid.Row="2"
            Orientation="Horizontal"
            HorizontalAlignment="Right"
            Padding="16"
            Spacing="8">
            <Button
                x:Name="ButtonVolver"
                Content="Volver"
                Width="100"
                Click="OnVolverClicked" />
        </StackPanel>
    </Grid>
</Window>
